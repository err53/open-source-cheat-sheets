% IF YOU CAN SEE THIS GO CONTRIBUTE >:(

\documentclass[letterpaper, 8pt]{extarticle}
\usepackage{amssymb,amsmath,amsthm,amsfonts}
\usepackage{multicol,multirow}
\usepackage{calc}
\usepackage{ifthen}
\usepackage[landscape]{geometry}
\usepackage[colorlinks=true,citecolor=blue,linkcolor=blue]{hyperref}

\usepackage{booktabs}
\usepackage{ulem}
\usepackage{enumitem}
\usepackage{tabulary}
\usepackage{graphicx}
\usepackage{siunitx}
\usepackage{tikz}
\usepackage{derivative}
\usepackage{svg}
\usepackage{listings}
\usepackage{setspace}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{courier}
\usepackage{syntax}
\usepackage{mathpartir}

% minimal line spacing
% \setstretch{0.1}

% set borders (experimentally determined to minimize cutoff and maximize space on school printers)
\geometry{top=.25in,left=.25in,right=.25in,bottom=.35in}

% make figures work better in multicol
\newenvironment{Figure}
{\par\medskip\noindent\minipage}
{\endminipage\par\medskip}

\pagestyle{empty} % clear page

% rewrite section commands to be smaller
\makeatletter
\renewcommand{\section}{\@startsection{section}{1}{0mm}%
                                {-1explus -.5ex minus -.2ex}%
                                {0.5ex plus .2ex}%x
                                {\normalfont\normalsize\bfseries}}
\renewcommand{\subsection}{\@startsection{subsection}{2}{0mm}%
                                {-1explus -.5ex minus -.2ex}%
                                {0.5ex plus .2ex}%
                                {\normalfont\small\bfseries}}
\renewcommand{\subsubsection}{\@startsection{subsubsection}{3}{0mm}%
                                {-1ex plus -.5ex minus -.2ex}%
                                {1ex plus .2ex}%
                                {\normalfont\tiny\bfseries}}
\makeatother
\setcounter{secnumdepth}{0} % disable section numbering


% disable indenting
\setlength{\parindent}{0pt}
\setlength{\parskip}{0pt plus 0.5ex}

% Custom siunitx defs
\DeclareSIUnit\noop{\relax}
\NewDocumentCommand\prefixvalue{m}{%
\qty[prefix-mode=extract-exponent,print-unity-mantissa=false]{1}{#1\noop}
}

% Shorthand definitions
\newcommand{\To}{\Rightarrow}
\newcommand{\ttt}{\texttt}
\newcommand{\ra}{\rightarrow}

% condense itemize & enumerate
\let\olditemize=\itemize \let\endolditemize=\enditemize \renewenvironment{itemize}{\olditemize \itemsep0em}{\endolditemize}
\let\oldenumerate=\enumerate \let\endoldenumerate=\endenumerate \renewenvironment{enumerate}{\oldenumerate \itemsep0em}{\endoldenumerate}
\setlist[itemize]{noitemsep, topsep=0pt, leftmargin=*}
\setlist[enumerate]{noitemsep, topsep=0pt, leftmargin=*}

\title{3GC3}

\begin{document}
\raggedright
\tiny

% make listings look nicer
\lstset{
    tabsize = 2, %% set tab space width
    showstringspaces = false, %% prevent space marking in strings, string is defined as the text that is generally printed directly to the console
    basicstyle = \tiny\ttfamily, %% set listing font and size
    breaklines = true, %% enable line breaking
    numberstyle = \tiny,
    postbreak = \mbox{\textcolor{red}{\(\hookrightarrow\)}\space}
}

\begin{center}
    {\textbf{3GC3 Midterm - Solaris-3 Edition}} \\
\end{center}
% set column spacing rules
\setlength{\premulticols}{1pt}
\setlength{\postmulticols}{1pt}
\setlength{\multicolsep}{1pt}
\setlength{\columnsep}{2pt}
\begin{multicols*}{4}

\section{Math}

\textbf{Dot Product}:
\(
\mathbf{a} \cdot \mathbf{b}
= x_a x_b + y_a y_b + z_a z_b
= ||\mathbf{a}|| ||\mathbf{b}|| \cos \phi
\)

\textbf{Cross Product}:
\(
\mathbf{a} \times \mathbf{b}
= (y_a z_b - z_a y_b, z_a x_b - x_a z_b, x_a y_b - y_a x_b)
= ||\mathbf{a}|| ||\mathbf{b}|| \sin(\theta) \mathbf{n}
\)

\textbf{Interpolation}:
\(t\) is how far along the line \(p_t\) is from \(p_0\) to \(p_1\) as a percentage between 0 and 1.
\(
t = (x_t - x_0) / (x_1 - x_0)
\text{ or }
t = (y_t - y_0) / (y_1 - y_0)
\)
\(
v_t = (1-t) v_0 + t v_1
\)

\textbf{Barycentric Interpolation}:
\(
\alpha = A_a / A \quad
\beta = A_b / A \quad
\gamma = A_c / A \quad
s.t.\ \alpha + \beta + \gamma = 1
\)

Now,
\(
\mathbf{p}(\alpha, \beta, \gamma)
= \alpha \mathbf{a} + \beta \mathbf{b} + \gamma \mathbf{c}
\)

\section{Graphics Pipeline}
Rendering steps:
\includegraphics[width=\linewidth]{rendering-steps.png}

\section{Transformations \& Coordinate Systems}
\textbf{Linear Transformation}:
\(
f(\begin{bmatrix}
    x \\ y
\end{bmatrix})
= \begin{bmatrix}
    a_{11} & a_{12} \\
    a_{21} & a_{22}
\end{bmatrix}
\begin{bmatrix}
    x \\ y
\end{bmatrix}
=
\begin{bmatrix}
    a_{11} x + a_{12} y \\
    a_{21} x + a_{22} y
\end{bmatrix}
\)
satisfies: \(
f(\mathbf{u} + \mathbf{v})
= f(\mathbf{u}) + f(\mathbf{v})
\)
and
\(
f(c\mathbf{u}) = cf(\mathbf{u})
\)

In other words, origin is unchanged, straight lines remain straight lines.

\textbf{Affine Transformation}
Straight lines remain lines.

\textbf{2D Rotations}
\(
f(p)
= x \begin{bmatrix}
    \cos \theta \\ \sin \theta
\end{bmatrix}
+ y \begin{bmatrix}
    -\sin \theta \\ \cos \theta
\end{bmatrix}
= \begin{bmatrix}
    \cos \theta & - \sin \theta \\
    \sin \theta &   \cos \theta
\end{bmatrix}
\begin{bmatrix}
    x \\ y
\end{bmatrix}
\)

\textbf{3D Rotations}
For a generic 3D rotation:
\(
R =
\begin{bmatrix}
    ax & bx & cx \\
    ay & by & cy \\
    az & bz & cz
\end{bmatrix}
\)
Where the \(a*\) column is the coordinates of the object's \(x'\) vector,
the \(b*\) column is the \(y'\) vector,
and the \(c*\) column is the \(z'\) vector:
\includegraphics[width=\linewidth]{3d-rotation.png}

\textbf{2D Reflection}
Reflect X:\@
\(
\begin{bmatrix} -1 & 0 \\ 0 & 1 \end{bmatrix}
\)
Reflect Y:\@
\(
\begin{bmatrix} 1 & 0 \\ 0 & -1 \end{bmatrix}
\)

\textbf{3D Scaling}
\(
\begin{bmatrix}
    s_x & 0 & 0 \\
    0 & s_y & 0 \\
    0 & 0 & s_z
\end{bmatrix}
\begin{bmatrix}
    x \\ y \\ z
\end{bmatrix}
=
\begin{bmatrix}
    s_x x \\ s_y y \\ s_z z
\end{bmatrix}
\)

\textbf{2D Shear Matrix}
Horizontal shear (top edge is shifted to the right (positive)):
\(
\begin{bmatrix}
    1 & s_x \\
    0 & 1
\end{bmatrix}
\)
Vertical shear (right edge is shifted up (positive)):
\(
\begin{bmatrix}
    1 & 0 \\
    s_y & 1
\end{bmatrix}
\)

\textbf{3D Shear Matrix}
\includegraphics[width=\linewidth]{3d-shear.png}
Shear on YZ Plane:
\(
\begin{bmatrix}
    1 & 0 & 0 \\
    s_y & 1 & 0 \\
    s_z & 0 & 1
\end{bmatrix}
\)

Shear on XZ Plane:
\(
\begin{bmatrix}
    1 & s_x & 0 \\
    0 & 1 & 0 \\
    0 & s_z & 1
\end{bmatrix}
\)

Shear on XY Plane:
\(
\begin{bmatrix}
    1 & 0 & s_x \\
    0 & 1 & s_y \\
    0 & 0 & 1
\end{bmatrix}
\)

\textbf{Homogenous Coordinate}
2D points represented by \((x, y, z)\), 2D location is \((x/z, y/z) \mid z=1\) or other value
3D points represented by \((x, y, z, w)\), 3D location is \((x/w, y/w, z/w) \mid w=1\) or other value
Used for perspective projection, \(z\) becomes depth value.

\textit{Transformation Matrix}
\includegraphics[width=\linewidth]{homogenous-coord-transformation-matrix.png}

\textbf{Composite Transformation}
Since scaling, rotation, etc is about origin, operations are not commutive!

\textit{Examples}
To rotate around an object's centre, 1 translate object centre to origin, 2 rotate, 3 translate back.

To scale an object along a non uniform axis, 1 rotate the object to align with a canonical axis, 2 scale object, 3 rotate object back.

\textbf{Inversions}
For rotation, scaling, and translating,
the inverse of a matrix \(M^{-1}\) can be used.
For rotation specifically, \(M^{-1}_{rotate}=M^T_{rotate}\)

\textbf{Coordinate Systems}
\textit{World/Global Coordinate}
Only one, unique.
Each model in scene goes through \(M_{model}\) to transform from model space to world space.

\section{Camera}

\section{Rasterization}

\section{Pipeline}
\includegraphics[width=\linewidth]{basic-graphics-pipeline.png}

\subsection{Application}
\textit{Main Program}
Runs on CPU
Defines geometry vertex positions, normals, texture coords, colours, etc.
Sets up camera position, orientation, projection volume
Sets screen size

Copies data to GPU

\subsection{Vertex Shader}
\textit{Per-vertex Computation}
No transformation: Simply assigns input to output (pass-through shader)
Transforming vertex: Apply \(M_{proj} M_{cam} M_{model}\) to input
Shading: determines vertex color (Gouraud)

GPU performs parallel processing on each vertex

\subsection{Culling}
\subsubsection{Backface Culling}
Removes primitives facing away from camera
Look at face normal / right hand rule,
face normal points in same direction as face.

\subsubsection{View Frustrum Culling}
Removes geometries outside view volume


\end{multicols*}

\end{document}
